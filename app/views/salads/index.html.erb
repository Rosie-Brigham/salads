# app/views/salads/index.html.erb
<!DOCTYPE html>
<html>
<head>
  <title>Shambala Salad Share</title>
  <%= csrf_meta_tags %>
  <%= stylesheet_link_tag 'application' %>
  <%= stylesheet_link_tag 'festival' %>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="festival-header">
      <h1>Shambala Salad Share</h1>
      <p>âœ¨ Join the community feast! âœ¨</p>
    </div>

    <% if notice %>
      <div class="alert alert-success"><%= notice %></div>
    <% end %>

    <% if alert %>
      <div class="alert alert-danger"><%= alert %></div>
    <% end %>

    <div class="row">
      <% @salads.each do |salad| %>
        <div class="col-md-6">
          <div class="salad-card">
            <% if salad.image_url.present? %>
              <%= image_tag salad.image_url, class: "salad-image", alt: salad.name %>
            <% end %>
            
            <div class="salad-content">
              <h2 class="salad-title"><%= salad.name %></h2>
              <p class="salad-description"><%= salad.description %></p>
              
              <div class="ingredients-list">
                <h4>ðŸ¥— Ingredients:</h4>
                <%= salad.ingredients %>
              </div>

              <div class="remaining-count">
                <%= salad.remaining_count %> out of <%= salad.total_needed %> portions needed
              </div>

              <% if salad.signups.any? %>
                <div class="signup-list">
                  <h4>ðŸŒŸ Wonderful humans bringing this salad:</h4>
                  <% salad.signups.each do |signup| %>
                    <div class="signup-item">
                      <%= signup.name %>
                      <%= button_to 'Remove', salad_signup_path(salad, signup), 
                          method: :delete, 
                          class: 'festival-btn delete',
                          data: { confirm: 'Are you sure?' } %>
                    </div>
                  <% end %>
                </div>
              <% else %>
                <p class="text-muted">Be the first to bring this salad! âœ¨</p>
              <% end %>

              <% if salad.available? %>
                <%= form_for [salad, @signup], html: { class: 'signup-form' } do |f| %>
                  <%= f.text_field :name, placeholder: "Your name", class: "form-control" %>
                  <%= f.submit "Count me in! ðŸŽ‰", class: "festival-btn" %>
                <% end %>
              <% else %>
                <p class="text-danger">All portions claimed! ðŸŽ‰</p>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</body>
</html>